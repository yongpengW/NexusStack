{
  "$schema": "https://json.schemastore.org/template",
  "author": "Leo Wang",
  "classifications": [ "Web", "API", "Microservices", "NexusStack" ],
  "identity": "NexusStack.Solution.Template",
  "name": "NexusStack - Modern Microservices Solution",
  "shortName": "nexusstack",
  "description": "🚀 A modern, production-ready microservices solution template for .NET with SignalR, RabbitMQ, Redis, EF Core and more.",
  "tags": {
    "language": "C#",
    "type": "solution"
  },
  "sourceName": "NexusStack",
  "preferNameDirectory": true,
  "primaryOutputs": [
    {
      "path": "NexusStack.sln"
    },
    {
      "path": "NexusStack_Backend.slnx"
    }
  ],
  "guids": [
    "11111111-1111-1111-1111-111111111111",
    "22222222-2222-2222-2222-222222222222",
    "33333333-3333-3333-3333-333333333333",
    "44444444-4444-4444-4444-444444444444",
    "A1111111-1111-1111-1111-111111111111",
    "A2222222-2222-2222-2222-222222222222",
    "A2222222-2222-2222-2222-222222222223",
    "A2222222-2222-2222-2222-222222222224",
    "A2222222-2222-2222-2222-222222222225",
    "A2222222-2222-2222-2222-222222222226",
    "A2222222-2222-2222-2222-222222222227",
    "A2222222-2222-2222-2222-222222222228",
    "A3333333-3333-3333-3333-333333333333",
    "A3333333-3333-3333-3333-333333333334",
    "A4444444-4444-4444-4444-444444444444",
    "A4444444-4444-4444-4444-444444444445",
    "41bd184c-836b-4942-badc-029cf644e91d"
  ],
  "symbols": {
    "IncludeGateway": {
      "type": "parameter",
      "datatype": "bool",
      "defaultValue": "true",
      "description": "包含 API 网关项目"
    },
    "IncludeMQService": {
      "type": "parameter",
      "datatype": "bool",
      "defaultValue": "true",
      "description": "包含消息队列后台服务"
    },
    "IncludePlanTaskService": {
      "type": "parameter",
      "datatype": "bool",
      "defaultValue": "true",
      "description": "包含计划任务服务"
    },
    "DatabaseProvider": {
      "type": "parameter",
      "datatype": "choice",
      "choices": [
        {
          "choice": "PostgreSQL",
          "description": "使用 PostgreSQL 数据库"
        },
        {
          "choice": "MySQL",
          "description": "使用 MySQL 数据库"
        },
        {
          "choice": "SqlServer",
          "description": "使用 SQL Server 数据库"
        }
      ],
      "defaultValue": "PostgreSQL",
      "description": "选择数据库提供程序"
    },
    "DbExtensionMethod": {
      "type": "generated",
      "generator": "switch",
      "parameters": {
        "evaluator": "C++",
        "datatype": "string",
        "cases": [
          { "condition": "(DatabaseProvider == 'PostgreSQL')", "value": "AddEFCoreAndPostgreSQL" },
          { "condition": "(DatabaseProvider == 'MySQL')", "value": "AddEFCoreAndMySql" },
          { "condition": "(DatabaseProvider == 'SqlServer')", "value": "AddEFCoreAndSqlServer" }
        ]
      },
      "replaces": "AddEFCoreAndPostgreSQL"
    },
    "TargetFramework": {
      "type": "parameter",
      "datatype": "choice",
      "choices": [
        {
          "choice": "net8.0",
          "description": ".NET 8"
        },
        {
          "choice": "net9.0",
          "description": ".NET 9"
        },
        {
          "choice": "net10.0",
          "description": ".NET 10"
        }
      ],
      "defaultValue": "net10.0",
      "replaces": "net10.0",
      "description": "Target Framework"
    }
  },
  "sources": [
    {
      "modifiers": [
        {
          "condition": "(!IncludeGateway)",
          "exclude": [ "Host/NexusStack.Gateway/**/*" ]
        },
        {
          "condition": "(!IncludeMQService)",
          "exclude": [ "BackgroundServices/NexusStack.MQService/**/*" ]
        },
        {
          "condition": "(!IncludePlanTaskService)",
          "exclude": [ "BackgroundServices/NexusStack.PlanTaskService/**/*" ]
        },
        {
          "exclude": [
            "**/bin/**",
            "**/obj/**",
            "**/.vs/**",
            "**/.git/**",
            "**/.idea/**",
            "**/packages/**",
            "**/*.user",
            "**/*.suo",
            "**/.template.config/**"
          ]
        }
      ]
    }
  ],
  "postActions": [
    {
      "description": "Restore NuGet Packages",
      "manualInstructions": [
        {
          "text": "Run 'dotnet restore'"
        }
      ],
      "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025",
      "continueOnError": true
    },
    {
      "description": "打开解决方案",
      "manualInstructions": [
        {
          "text": "请使用 Visual Studio 打开解决方案文件"
        }
      ],
      "actionId": "84C0DA21-51C8-4541-9940-6CA19AF04EE6",
      "args": {
        "files": "0"
      },
      "continueOnError": true
    }
  ]
}
