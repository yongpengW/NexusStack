{
  "$schema": "http://json.schemastore.org/template",
  "author": "Leo Wang",
  "classifications": [ "Web", "API", "Microservices", "NexusStack" ],
  "identity": "NexusStack.Solution.Template",
  "name": "NexusStack - Modern Microservices Solution",
  "shortName": "nexusstack",
  "description": "🚀 A modern, production-ready microservices solution template for .NET with SignalR, RabbitMQ, Redis, EF Core and more.",
  "tags": {
    "language": "C#",
    "type": "solution"
  },
  "sourceName": "NexusStack",
  "preferNameDirectory": true,
  "primaryOutputs": [
    {
      "path": "NexusStack.sln",
      "condition": "(true)"
    },
    {
      "path": "NexusStack_Backend.slnx",
      "condition": "(true)"
    }
  ],
  "symbols": {
    "EnableSignalR": {
      "type": "parameter",
      "datatype": "bool",
      "defaultValue": "true",
      "description": "启用 SignalR 支持"
    },
    "EnableRabbitMQ": {
      "type": "parameter",
      "datatype": "bool",
      "defaultValue": "true",
      "description": "启用 RabbitMQ 支持"
    },
    "EnableRedis": {
      "type": "parameter",
      "datatype": "bool",
      "defaultValue": "true",
      "description": "启用 Redis 支持"
    },
    "IncludeGateway": {
      "type": "parameter",
      "datatype": "bool",
      "defaultValue": "true",
      "description": "包含 API 网关项目"
    },
    "DatabaseProvider": {
      "type": "parameter",
      "datatype": "choice",
      "choices": [
        {
          "choice": "PostgreSQL",
          "description": "使用 PostgreSQL 数据库"
        },
        {
          "choice": "MySQL",
          "description": "使用 MySQL 数据库"
        },
        {
          "choice": "SqlServer",
          "description": "使用 SQL Server 数据库"
        }
      ],
      "defaultValue": "PostgreSQL",
      "description": "选择数据库提供程序"
    },
    "IncludeMQService": {
      "type": "parameter",
      "datatype": "bool",
      "defaultValue": "true",
      "description": "包含消息队列后台服务"
    },
    "IncludePlanTaskService": {
      "type": "parameter",
      "datatype": "bool",
      "defaultValue": "true",
      "description": "包含计划任务服务"
    },
    "TargetFramework": {
      "type": "parameter",
      "datatype": "choice",
      "choices": [
        {
          "choice": "net8.0",
          "description": ".NET 8"
        },
        {
          "choice": "net9.0",
          "description": ".NET 9"
        },
        {
          "choice": "net10.0",
          "description": ".NET 10"
        }
      ],
      "defaultValue": "net10.0",
      "replaces": "net10.0",
      "description": "Target Framework"
    }
  },
  "sources": [
    {
      "modifiers": [
        {
          "condition": "(!IncludeGateway)",
          "exclude": [ "Host/NexusStack.Gateway/**/*" ]
        },
        {
          "condition": "(!IncludeMQService)",
          "exclude": [ "BackgroundServices/NexusStack.MQService/**/*" ]
        },
        {
          "condition": "(!IncludePlanTaskService)",
          "exclude": [ "BackgroundServices/NexusStack.PlanTaskService/**/*" ]
        },
        {
          "exclude": [
            "**/bin/**",
            "**/obj/**",
            "**/.vs/**",
            "**/.git/**",
            "**/.idea/**",
            "**/packages/**",
            "**/*.user",
            "**/*.suo",
            "**/.template.config/**"
          ]
        }
      ]
    }
  ],
  "postActions": [
    {
      "description": "Restore NuGet Packages",
      "manualInstructions": [
        {
          "text": "Run 'dotnet restore'"
        }
      ],
      "actionId": "210D431B-A78B-4D2F-B762-4ED3E3EA9025",
      "continueOnError": true
    },
    {
      "description": "Open Solution",
      "manualInstructions": [
        {
          "text": "Open the solution file in Visual Studio"
        }
      ],
      "actionId": "84C0DA21-51C8-4541-9940-6CA19AF04EE6",
      "args": {
        "files": "0"
      },
      "continueOnError": true
    }
  ]
}
